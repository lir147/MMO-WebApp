<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MMORPG WebUI</title>
  <style>
    :root {
      --bg: #0e101a;
      --card: #171b2b;
      --text: #e8eaf6;
      --accent: #4caf50;
      --danger: #e53935;
      --muted: #aab4d4;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(135deg, #0b1020 0%, #1a1f3a 60%, #0e101a 100%);
      color: var(--text);
      min-height: 100vh;
    }
    header {
      padding: 1rem;
      text-align: center;
      background: rgba(20, 22, 40, 0.8);
      position: sticky;
      top: 0;
      backdrop-filter: blur(4px);
      border-bottom: 1px solid #2a2f58;
    }
    header h1 { margin: 0; font-size: 1.25rem; }
    nav {
      display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;
      padding: 0.5rem;
    }
    nav button {
      background: #232750; color: #fff; border: 1px solid #394280;
      padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer;
    }
    nav button.active { background: #2f3c90; border-color: #4f59c9; }
    main {
      display: grid; grid-template-columns: 1fr; gap: 1rem;
      max-width: 1100px; margin: 1rem auto; padding: 0 1rem;
    }
    .card {
      background: linear-gradient(180deg, rgba(23,27,43,.95) 0%, rgba(23,27,43,.85) 100%);
      border: 1px solid #2a2f58; border-radius: 12px; padding: 1rem;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
    }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .field { margin-bottom: 0.75rem; }
    label { display: block; font-size: 0.85rem; color: var(--muted); margin-bottom: 0.25rem; }
    input, select, textarea {
      width: 100%; padding: 0.5rem; border-radius: 6px;
      border: 1px solid #2e2f60; background: #141a36; color: #fff;
    }
    button.primary {
      background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
      color: white; border: 0; padding: 0.6rem 1rem; border-radius: 6px;
      cursor: pointer;
    }
    button.secondary {
      background: #2a2f58; color: #fff; border: 1px solid #3b4396; padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer;
    }
    pre {
      background: #0b1130; padding: 0.75rem; border-radius: 6px; overflow: auto; max-height: 240px;
      border: 1px solid #2a2f58;
    }
    #notices { font-size: 0.9rem; color: #d1d9ff; }
  </style>
</head>
<body>
  <header>
    <h1>MMORPG WebUI</h1>
    <nav>
      <button class="tab active" data-tab="character">Персонаж</button>
      <button class="tab" data-tab="quest">Квесты</button>
      <button class="tab" data-tab="market">Рынок</button>
      <button class="tab" data-tab="system">Система</button>
    </nav>
  </header>

  <main>
    <!-- Персонаж -->
    <section class="card" id="character-section" aria-labelledby="character-title">
      <h2 id="character-title">Персонаж</h2>
      <div class="grid-2">
        <div class="field">
          <label for="char-id">ID персонажа</label>
          <input type="text" id="char-id" placeholder="Введите ID персонажа" />
        </div>
        <div class="field">
          <label for="char-name">Имя</label>
          <input type="text" id="char-name" placeholder="Имя персонажа" readonly />
        </div>
      </div>
      <div class="grid-2">
        <div class="field">
          <label for="char-level">Уровень</label>
          <input type="text" id="char-level" placeholder="Уровень" readonly />
        </div>
        <div class="field">
          <label for="char-class">Класс</label>
          <input type="text" id="char-class" placeholder="Класс" readonly />
        </div>
      </div>
      <div class="field">
        <label for="char-stats">Статы</label>
        <pre id="char-stats">—</pre>
      </div>
      <div class="grid-2">
        <button class="secondary" id="btn-fetch-char">Загрузить персонажа</button>
        <button class="primary" id="btn-levelup">Повысить уровень</button>
      </div>
    </section>

    <!-- Квесты -->
    <section class="card" id="quest-section" aria-labelledby="quest-title" style="display:none;">
      <h2 id="quest-title">Квесты</h2>
      <div class="field">
        <label for="quest-id">ID квеста</label>
        <input type="text" id="quest-id" placeholder="Введите ID квеста" />
      </div>
      <div class="field">
        <button class="primary" id="btn-get-quest">Получить квест</button>
      </div>
      <pre id="quest-output">Здесь будет текстовая информация о квесте.</pre>
    </section>

    <!-- Рынок -->
    <section class="card" id="market-section" aria-labelledby="market-title" style="display:none;">
      <h2 id="market-title">Рынок</h2>
      <div class="grid-2">
        <div class="field">
          <label for="market-search">Поиск товара</label>
          <input type="text" id="market-search" placeholder="Название товара" />
        </div>
        <div class="field">
          <label for="market-filter">Фильтр</label>
          <select id="market-filter">
            <option value="all">Все</option>
            <option value="weapon">Оружие</option>
            <option value="armor">Доспехи</option>
            <option value="consumable">Зелья</option>
          </select>
        </div>
      </div>
      <div class="field">
        <button class="secondary" id="btn-list-market">Список товаров</button>
      </div>
      <pre id="market-output">Список товаров будет отображаться здесь.</pre>
    </section>

    <!-- Система / безопасность -->
    <section class="card" id="system-section" aria-labelledby="system-title" style="display:none;">
      <h2 id="system-title">Безопасность и производительность</h2>
      <div class="field">
        <label>Протокол</label>
        <span id="https-status">HTTPS: включен</span>
      </div>
      <div class="field">
        <label>Зависимости</label>
        <span>Регулярно обновляйте зависимости и сканируйте на уязвимости.</span>
      </div>
      <div class="field">
        <label>Валидация</label>
        <span>Валидация входящих данных на стороне сервера и клиента.</span>
      </div>
      <pre id="system-log">Логи системы будут здесь.</pre>
      <button class="primary" id="btn-refresh-sec">Обновить статус</button>
    </section>

  </main>

  <script>
    // Простая навигация между секциями
    const tabs = document.querySelectorAll('.tab');
    const sections = {
      character: document.getElementById('character-section'),
      quest: document.getElementById('quest-section'),
      market: document.getElementById('market-section'),
      system: document.getElementById('system-section')
    };

    tabs.forEach(t => t.addEventListener('click', () => {
      tabs.forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      const tab = t.getAttribute('data-tab');
      Object.values(sections).forEach(sec => sec.style.display = 'none');
      sections[tab].style.display = 'block';
    }));

    // Пример взаимодействия с API (заглушки)
    async function fetchCharacter(id) {
      // Замена на реальный вызов API: GET /character/:id
      // Здесь заглушка:
      return {
        id, name: 'Геральд', level: 12, class: 'Воин',
        stats: { hp: 120, atk: 34, def: 28 }
      };
    }

    async function levelUpCharacter(id) {
      // Заглушка вызова POST /character/:id/levelUp
      return { success: true, newLevel: 13 };
    }

    async function fetchQuest(id) {
      // Заглушка GET /quest/:id
      return { id, title: 'Пробуждение башни', description: 'Найти источник темной силы.' };
    }

    async function listMarket(query, filter) {
      // Заглушка GET /market/list
      return [
        { id: 1, name: 'Длинный меч', type: 'weapon', price: 150 },
        { id: 2, name: 'Легкая броня', type: 'armor', price: 200 }
      ];
    }

    // UI обработчики
    document.getElementById('btn-fetch-char').addEventListener('click', async () => {
      const id = document.getElementById('char-id').value.trim();
      if (!id) { alert('Введите ID персонажа'); return; }
      const c = await fetchCharacter(id);
      document.getElementById('char-name').value = c.name;
      document.getElementById('char-level').value = c.level;
      document.getElementById('char-class').value = c.class;
      document.getElementById('char-stats').textContent = JSON.stringify(c.stats, null, 2);
    });

    document.getElementById('btn-levelup').addEventListener('click', async () => {
      const id = document.getElementById('char-id').value.trim();
      if (!id) { alert('Введите ID персонажа'); return; }
      const r = await levelUpCharacter(id);
      if (r.success) {
        document.getElementById('char-level').value = r.newLevel;
        alert('Уровень повышен до ' + r.newLevel);
      } else {
        alert('Не удалось повысить уровень');
      }
    });

    document.getElementById('btn-get-quest').addEventListener('click', async () => {
      const id = document.getElementById('quest-id').value.trim();
      if (!id) { alert('Введите ID квеста'); return; }
      const q = await fetchQuest(id);
      document.getElementById('quest-output').textContent = 'Квест: ' + q.title + '\n' + q.description;
    });

    document.getElementById('btn-list-market').addEventListener('click', async () => {
      const q = document.getElementById('market-search').value.trim();
      const f = document.getElementById('market-filter').value;
      const items = await listMarket(q, f);
      document.getElementById('market-output').textContent = items.map(it => it.name + ' (' + it.type + ') - ' + it.price + ' монет').join('\\n');
    });

    document.getElementById('btn-refresh-sec').addEventListener('click', () => {
      document.getElementById('system-log').textContent = 'Статус: онлайн. Верификация TLS:OK. Время: ' + new Date().toLocaleTimeString();
    });

    // По умолчанию показать секцию персонажа
    document.querySelector('[data-tab="character"]').click();
  </script>
</body>
</html>