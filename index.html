<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram Web RPG</title>
<style>
:root {
    --dark-bg:#0f172a; --panel-bg:#1e293b; --accent:#3b82f6; --accent-dark:#2563eb;
    --text:#f1f5f9; --text-muted:#94a3b8; --health:#ef4444; --mana:#6366f1; --xp:#10b981;
    --gold:#f59e0b; --success:#10b981; --danger:#ef4444; --locked:#475569;
}
* {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body {background:var(--dark-bg);color:var(--text);min-height:100vh;padding:20px;}
.container{max-width:1200px;margin:0 auto;}
header{display:flex;justify-content:space-between;align-items:center;padding:15px;background:var(--panel-bg);border-radius:12px;margin-bottom:15px;}
.character-info{display:flex;align-items:center;gap:10px;}
.character-visual{position:relative;width:60px;height:60px;background:rgba(30,41,59,0.7);border-radius:8px;display:flex;justify-content:center;align-items:center;}
.character-base{width:40px;height:40px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="20" fill="%23f59e0b"/></svg>');background-size:contain;background-repeat:no-repeat;}
.gold-display{display:flex;align-items:center;gap:5px;font-weight:bold;color:var(--gold);}
.tabs{display:flex;margin-bottom:15px;background:var(--panel-bg);border-radius:8px;}
.tab-btn{flex:1;padding:10px;background:transparent;border:none;color:var(--text-muted);cursor:pointer;transition:all 0.3s;font-weight:bold;}
.tab-btn.active{background:var(--accent);color:white;}
.tab-content{display:none;animation:fadeIn 0.3s;}
.tab-content.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
.creation-panel, .stats-panel, .inventory-panel, .skills-container, .tavern-panel, .location-panel, .combat-screen, .loot-screen{background:var(--panel-bg);padding:15px;border-radius:8px;margin-bottom:15px;}
.class-grid, .gender-grid, .skills-grid, .inventory-grid, .shop-items, .blacksmith-items, .locations-grid{display:grid;gap:10px;}
.class-grid, .gender-grid{grid-template-columns:repeat(2,1fr);}
.skills-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));}
.inventory-grid{grid-template-columns:repeat(5,1fr);}
.locations-grid{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));}
.class-option, .gender-option, .item-slot, .skill-card, .shop-item, .blacksmith-item, .location{background:rgba(30,41,59,0.7);border-radius:6px;padding:10px;text-align:center;cursor:pointer;transition:all 0.3s;}
.class-option.selected, .gender-option.selected, .item-slot.equipped{border:2px solid var(--accent);}
.upgrade-btn,.combat-btn,.buy-btn,.sell-btn,.craft-btn,.dismantle-btn{background:var(--accent);color:white;border:none;padding:5px 8px;border-radius:4px;cursor:pointer;}
.upgrade-btn:disabled,.combat-btn:disabled,.buy-btn:disabled,.sell-btn:disabled,.craft-btn:disabled,.dismantle-btn:disabled{background:var(--locked);cursor:not-allowed;}
.resource-bar{margin-bottom:10px;}
.bar{height:20px;background:#334155;border-radius:10px;overflow:hidden;}
.bar-fill{height:100%;transition:width 0.3s;}
.health .bar-fill{background:var(--health);}
.mana .bar-fill{background:var(--mana);}
.xp .bar-fill{background:var(--xp);}
.combat-log{background:rgba(30,41,59,0.7);padding:10px;border-radius:6px;max-height:150px;overflow-y:auto;}
</style>
</head>
<body>
<div class="container">
<header>
    <div class="character-info">
        <div class="character-visual">
            <div class="character-base" id="character-base"></div>
        </div>
        <div class="header-text">
            <h1 id="header-name">–í–æ–∏–Ω</h1>
            <div id="header-level">–£—Ä–æ–≤–µ–Ω—å 1</div>
        </div>
    </div>
    <div class="gold-display">
        ü™ô <span id="gold-amount">50</span>
    </div>
</header>

<div class="tabs">
    <button class="tab-btn active" data-tab="creation">–°–æ–∑–¥–∞–Ω–∏–µ</button>
    <button class="tab-btn" data-tab="stats">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
    <button class="tab-btn" data-tab="skills">–£–º–µ–Ω–∏—è</button>
    <button class="tab-btn" data-tab="tavern">–¢–∞–≤–µ—Ä–Ω–∞</button>
    <button class="tab-btn" data-tab="location">–õ–æ–∫–∞—Ü–∏–∏</button>
</div>

<!-- --- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ --- -->
<div class="tab-content active" id="creation">
    <div class="creation-panel">
        <h2>–í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞</h2>
        <input type="text" id="nickname" placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞">
        <div class="class-grid">
            <div class="class-option selected" data-class="warrior">‚öîÔ∏è –í–æ–∏–Ω</div>
            <div class="class-option" data-class="mage">üßô –ú–∞–≥</div>
            <div class="class-option" data-class="archer">üèπ –õ—É—á–Ω–∏–∫</div>
            <div class="class-option" data-class="rogue">üó°Ô∏è –†–∞–∑–±–æ–π–Ω–∏–∫</div>
        </div>
    </div>
    <div class="creation-panel">
        <h2>–í—ã–±–æ—Ä –ø–æ–ª–∞</h2>
        <div class="gender-grid">
            <div class="gender-option selected" data-gender="male">üë® –ú—É–∂—Å–∫–æ–π</div>
            <div class="gender-option" data-gender="female">üë© –ñ–µ–Ω—Å–∫–∏–π</div>
        </div>
    </div>
</div>

<!-- --- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ --- -->
<div class="tab-content" id="stats">
    <div class="stats-panel">
        <h2>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
        <div class="resource-bar health"><div class="bar"><div class="bar-fill" id="health-bar" style="width:100%"></div></div></div>
        <div class="resource-bar mana"><div class="bar"><div class="bar-fill" id="mana-bar" style="width:100%"></div></div></div>
        <div class="resource-bar xp"><div class="bar"><div class="bar-fill" id="xp-bar" style="width:0%"></div></div></div>
        <div>–°–∏–ª–∞: <span id="strength-value">5</span> <button class="upgrade-btn" data-stat="strength">+</button></div>
        <div>–õ–æ–≤–∫–æ—Å—Ç—å: <span id="agility-value">5</span> <button class="upgrade-btn" data-stat="agility">+</button></div>
        <div>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="intellect-value">5</span> <button class="upgrade-btn" data-stat="intellect">+</button></div>
        <div>–ñ–∏–≤—É—á–µ—Å—Ç—å: <span id="vitality-value">5</span> <button class="upgrade-btn" data-stat="vitality">+</button></div>
    </div>
    <div class="inventory-panel">
        <h2>–†—é–∫–∑–∞–∫</h2>
        <div class="inventory-grid" id="inventory">
            <div class="item-slot empty"></div><div class="item-slot empty"></div>
            <div class="item-slot empty"></div><div class="item-slot empty"></div>
            <div class="item-slot empty"></div><div class="item-slot empty"></div>
            <div class="item-slot empty"></div><div class="item-slot empty"></div>
            <div class="item-slot empty"></div><div class="item-slot empty"></div>
        </div>
    </div>
</div>

<!-- --- –£–º–µ–Ω–∏—è --- -->
<div class="tab-content" id="skills">
    <div class="skills-container">
        <h2>–£–º–µ–Ω–∏—è</h2>
        <div class="skills-grid" id="skills-grid"></div>
    </div>
</div>

<!-- --- –¢–∞–≤–µ—Ä–Ω–∞ --- -->
<div class="tab-content" id="tavern">
    <div class="tavern-panel">
        <h2>–¢–∞–≤–µ—Ä–Ω–∞ "–£ –ì–Ω–æ–º–∞"</h2>
        <div class="shop-items" id="shop-items"></div>
        <div class="blacksmith-items" id="upgrade-items"></div>
    </div>
</div>

<!-- --- –õ–æ–∫–∞—Ü–∏–∏ --- -->
<div class="tab-content" id="location">
    <div class="location-panel">
        <h2>–ú–∏—Ä –≠–º–æ–Ω–∞</h2>
        <div class="locations-grid" id="locations-grid"></div>
    </div>
</div>

<!-- --- –ë–æ–π --- -->
<div class="tab-content" id="combat">
    <div class="combat-screen">
        <div class="combat-log" id="combat-log"></div>
        <div class="combat-actions">
            <button class="combat-btn" id="attack-btn">–ê—Ç–∞–∫–∞</button>
            <button class="combat-btn" id="skill-btn">–£–º–µ–Ω–∏–µ</button>
        </div>
    </div>
</div>

<!-- --- –î–æ–±—ã—á–∞ --- -->
<div class="tab-content" id="loot">
    <div class="loot-screen">
        <h2>–î–æ–±—ã—á–∞</h2>
        <div class="loot-items" id="loot-items"></div>
    </div>
</div>

</div>

<script>
// --- Character Data ---
const character = {
    name:"–í–æ–∏–Ω", level:1, gold:50, health:100, mana:50, xp:0,
    strength:5, agility:5, intellect:5, vitality:5,
    inventory:[]
};

// --- Items with rarity ---
const items = [
    {id:1,name:"–ú–µ—á",type:"weapon",attack:5,value:20,rarity:"common"},
    {id:2,name:"–õ—É–∫",type:"weapon",attack:3,value:15,rarity:"common"},
    {id:3,name:"–ë—Ä–æ–Ω—è",type:"armor",defense:5,value:25,rarity:"common"},
    {id:4,name:"–ó–µ–ª—å–µ –º–∞–Ω—ã",type:"consumable",mana:20,value:10,rarity:"common"},
    {id:5,name:"–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è",type:"consumable",health:30,value:15,rarity:"common"},
    {id:6,name:"–†–µ–¥–∫–∏–π –ú–µ—á",type:"weapon",attack:10,value:50,rarity:"rare"},
    {id:7,name:"–†–µ–¥–∫–∞—è –ë—Ä–æ–Ω—è",type:"armor",defense:12,value:60,rarity:"rare"},
    {id:8,name:"–≠–ø–∏—á–µ—Å–∫–∏–π –õ—É–∫",type:"weapon",attack:18,value:120,rarity:"epic"},
    {id:9,name:"–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ê–º—É–ª–µ—Ç",type:"armor",defense:25,value:300,rarity:"legendary"}
];

// --- Tabs ---
document.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.addEventListener('click',()=>{openTab(btn.dataset.tab)});
});
function openTab(tab){document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
document.querySelector(`.tab-btn[data-tab="${tab}"]`).classList.add('active');
document.getElementById(tab).classList.add('active');}

// --- Creation ---
document.querySelectorAll('.class-option').forEach(c=>{
    c.addEventListener('click',()=>{document.querySelectorAll('.class-option').forEach(x=>x.classList.remove('selected'));c.classList.add('selected');character.name=c.dataset.class;updateHeader();});
});
document.querySelectorAll('.gender-option').forEach(g=>{
    g.addEventListener('click',()=>{document.querySelectorAll('.gender-option').forEach(x=>x.classList.remove('selected'));g.classList.add('selected');});
});
document.getElementById('nickname').addEventListener('input',e=>{character.name=e.target.value;updateHeader();});
function updateHeader(){document.getElementById('header-name').textContent=character.name;}

// --- Inventory ---
function renderInventory(){
    const inv = document.getElementById('inventory');
    inv.innerHTML = '';
    for(let i=0;i<10;i++){
        const slot = document.createElement('div');slot.classList.add('item-slot');
        if(character.inventory[i]){slot.textContent = character.inventory[i].name;slot.classList.add('equipped');}
        else slot.classList.add('empty');
        inv.appendChild(slot);
    }
}

// --- Stats Upgrade ---
document.querySelectorAll('.upgrade-btn').forEach(b=>{
    b.addEventListener('click',()=>{
        const stat = b.dataset.stat;
        if(character.gold>=10){character[stat]+=1;character.gold-=10;updateStats();}
    });
});
function updateStats(){
    document.getElementById('strength-value').textContent=character.strength;
    document.getElementById('agility-value').textContent=character.agility;
    document.getElementById('intellect-value').textContent=character.intellect;
    document.getElementById('vitality-value').textContent=character.vitality;
    document.getElementById('gold-amount').textContent=character.gold;
}

// --- Loot Drop ---
function dropLoot(){
    const roll = Math.random();
    let rarityRoll;
    if(roll<0.6) rarityRoll="common";
    else if(roll<0.85) rarityRoll="rare";
    else if(roll<0.97) rarityRoll="epic";
    else rarityRoll="legendary";
    const possible = items.filter(i=>i.rarity===rarityRoll);
    const loot = possible[Math.floor(Math.random()*possible.length)];
    character.inventory.push(loot);
    const log = document.getElementById('combat-log');
    log.innerHTML += `<p>–í—ã –Ω–∞—à–ª–∏ –ø—Ä–µ–¥–º–µ—Ç (${loot.rarity}): ${loot.name}!</p>`;
    renderInventory();
}

// --- Initialize ---
updateHeader();
updateStats();
renderInventory();
</script>
</body>
</html>
