<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Mini-MMORPG —Å –∫–∞—Ä—Ç–æ–π</title>
<style>
body { font-family: Arial; background:#111; color:#fff; text-align:center; }
#game { margin:20px auto; width:400px; height:400px; border:2px solid #fff; border-radius:10px; background:#222; position:relative; overflow:hidden; }
.tile { width:80px; height:80px; float:left; border:1px solid #444; background-size:cover; position:relative; }
.character, .monster, .loot, .shop { width:60px; height:60px; position:absolute; transition:all 0.3s ease; }
.character img, .monster img, .loot img, .shop img { width:100%; height:100%; }
.damage { position:absolute; font-weight:bold; color:red; animation:up 1s forwards; }
@keyframes up { 0% { opacity:1; transform:translateY(0); } 100% { opacity:0; transform:translateY(-40px); } }
#status { margin-top:10px; border:1px solid #fff; padding:5px; text-align:left; }
.bar { width:100%; height:15px; background:#444; border-radius:5px; margin:2px 0; position:relative; }
.bar-fill { height:100%; background:#0f0; width:0%; border-radius:5px; }
#inventory { margin-top:10px; }
.item { width:50px; height:50px; margin:5px; display:inline-block; background-size:cover; border:1px solid #fff; border-radius:5px; cursor:pointer; }
</style>
</head>
<body>

<h2>Mini-MMORPG —Å –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ–π</h2>
<div id="game"></div>

<div id="status">
    HP: <div class="bar"><div class="bar-fill" id="hpFill"></div></div>
    MP: <div class="bar"><div class="bar-fill" id="mpFill"></div></div>
    EXP: <div class="bar"><div class="bar-fill" id="expFill"></div></div>
    Level: <span id="levelDisplay">1</span>
    VIP —É—Ä–æ–≤–µ–Ω—å: <span id="vipDisplay">0</span>
    –ú–æ–Ω–µ—Ç—ã: <span id="coinsDisplay">0</span>
</div>

<div id="inventory"></div>

<div id="log" style="height:120px; overflow-y:auto; border:1px solid #fff; padding:5px;"></div>

<script>
// –ò–≥—Ä–æ–∫
let player = {x:2,y:2,hp:100,maxHp:100,mp:50,maxMp:50,exp:0,nextLevelExp:100,level:1,coins:0,vipLevel:0,inventory:[],equipment:{weapon:null,shield:null,armor:null}};

// –¢–∞–π–ª—ã –∫–∞—Ä—Ç—ã
const mapDiv=document.getElementById("game");
const tileSize=80;
let mapTiles=[];
for(let y=0;y<5;y++){
    mapTiles[y]=[];
    for(let x=0;x<5;x++){
        const tile=document.createElement("div");
        tile.className="tile";
        tile.style.backgroundImage="url('https://i.imgur.com/lfkz2Tq.png')";
        tile.style.left=x*tileSize+"px";
        tile.style.top=y*tileSize+"px";
        mapDiv.appendChild(tile);
        mapTiles[y][x]=tile;
    }
}

// –ü–µ—Ä—Å–æ–Ω–∞–∂
const characterDiv=document.createElement("div");
characterDiv.className="character";
characterDiv.style.left=player.x*tileSize+10+"px";
characterDiv.style.top=player.y*tileSize+10+"px";
characterDiv.innerHTML='<img src="https://i.imgur.com/4c6wqdn.png">';
mapDiv.appendChild(characterDiv);

// –õ–æ–≥–∏
function log(msg){ const logDiv=document.getElementById("log"); logDiv.innerHTML+=msg+"<br>"; logDiv.scrollTop=logDiv.scrollHeight; }

// –°—Ç–∞—Ç—É—Å—ã
function updateStatus(){
    document.getElementById("hpFill").style.width=(player.hp/player.maxHp*100)+"%";
    document.getElementById("mpFill").style.width=(player.mp/player.maxMp*100)+"%";
    document.getElementById("expFill").style.width=(player.exp/player.nextLevelExp*100)+"%";
    document.getElementById("levelDisplay").innerText=player.level;
    document.getElementById("vipDisplay").innerText=player.vipLevel;
    document.getElementById("coinsDisplay").innerText=player.coins;
}

// –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
function updateInventory(){
    const invDiv=document.getElementById("inventory");
    invDiv.innerHTML="";
    for(let key in player.equipment){
        if(player.equipment[key]){
            const div=document.createElement("div");
            div.className="item";
            div.style.backgroundImage=`url(${player.equipment[key].img})`;
            div.title=player.equipment[key].name;
            invDiv.appendChild(div);
        }
    }
}

// –°–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤
let monsters=[],loots=[],shops=[];
function spawnMonster(x,y,img="https://i.imgur.com/EhFz7ON.png"){
    const div=document.createElement("div");
    div.className="monster";
    div.style.left=x*tileSize+10+"px";
    div.style.top=y*tileSize+10+"px";
    div.innerHTML=`<img src="${img}">`;
    mapDiv.appendChild(div);
    monsters.push({x,y,div});
    log(`–ú–æ–Ω—Å—Ç—Ä –Ω–∞ (${x},${y})`);
}
function spawnLoot(x,y,img="https://i.imgur.com/OY8o0jA.png",type="weapon",name="–ú–µ—á"){
    const div=document.createElement("div");
    div.className="loot";
    div.style.left=x*tileSize+10+"px";
    div.style.top=y*tileSize+10+"px";
    div.innerHTML=`<img src="${img}">`;
    div.onclick=()=>{
        if(type=="weapon"||type=="shield"){ player.equipment[type]={name,img}; updateInventory(); }
        log(`–ü–æ–¥–æ–±—Ä–∞–Ω–æ ${name}`);
        div.remove();
    };
    mapDiv.appendChild(div);
    loots.push({x,y,div});
}
function spawnShop(x,y,img="https://i.imgur.com/7c3tN2B.png"){
    const div=document.createElement("div");
    div.className="shop";
    div.style.left=x*tileSize+10+"px";
    div.style.top=y*tileSize+10+"px";
    div.innerHTML=`<img src="${img}">`;
    div.onclick=()=>{
        const choice=prompt("–ö—É–ø–∏—Ç—å: 1-HP 2-MP (–¶–µ–Ω–∞: 10 –º–æ–Ω–µ—Ç)");
        if(choice=="1" && player.coins>=10){ player.coins-=10; player.hp=Math.min(player.maxHp,player.hp+50); log("üíñ –ö—É–ø–ª–µ–Ω–æ HP"); }
        else if(choice=="2" && player.coins>=10){ player.coins-=10; player.mp=Math.min(player.maxMp,player.mp+30); log("üîÆ –ö—É–ø–ª–µ–Ω–æ MP"); }
        else log("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç");
        updateStatus();
    };
    mapDiv.appendChild(div);
    shops.push({x,y,div});
}

// –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
function moveTo(x,y){
    if(x<0||y<0||x>4||y>4) return;
    player.x=x; player.y=y;
    characterDiv.style.left=x*tileSize+10+"px";
    characterDiv.style.top=y*tileSize+10+"px";
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã
    monsters.forEach(m=>{ if(m.x==x && m.y==y){ log("üíÄ –°—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –º–æ–Ω—Å—Ç—Ä–æ–º!"); } });
    loots.forEach(l=>{ if(l.x==x && l.y==y){ log("‚ú® –†—è–¥–æ–º –ª—É—Ç!"); } });
    shops.forEach(s=>{ if(s.x==x && s.y==y){ log("üè™ –†—è–¥–æ–º –º–∞–≥–∞–∑–∏–Ω!"); } });
}

document.addEventListener("keydown",e=>{
    if(e.key==="ArrowUp") moveTo(player.x,player.y-1);
    if(e.key==="ArrowDown") moveTo(player.x,player.y+1);
    if(e.key==="ArrowLeft") moveTo(player.x-1,player.y);
    if(e.key==="ArrowRight") moveTo(player.x+1,player.y);
});

// –°–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤
spawnMonster(0,0);
spawnMonster(4,4);
spawnMonster(1,3);
spawnLoot(2,1);
spawnLoot(3,2,"https://i.imgur.com/7c3tN2B.png","hp","–ó–µ–ª—å–µ HP");
spawnShop(2,0);

updateInventory();
updateStatus();
</script>

</body>
</html>
