<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RPG Telegram WebApp</title>
<style>
:root {
    --dark-bg:#0f172a;--panel-bg:#1e293b;--accent:#3b82f6;--accent-dark:#2563eb;--text:#f1f5f9;--text-muted:#94a3b8;--health:#ef4444;--mana:#6366f1;--xp:#10b981;--strength:#f59e0b;--agility:#10b981;--vitality:#ef4444;--intellect:#3b82f6;--locked:#475569;--gold:#f59e0b;--success:#10b981;--danger:#ef4444;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body{background:var(--dark-bg);color:var(--text);min-height:100vh;}
.container{max-width:1200px;margin:0 auto;padding:10px;}
header{display:flex;justify-content:space-between;align-items:center;background:var(--panel-bg);padding:15px;border-radius:12px;margin-bottom:20px;}
.character-info{display:flex;align-items:center;gap:15px;}
.character-visual{position:relative;width:80px;height:80px;background:rgba(30,41,59,0.7);border-radius:8px;display:flex;align-items:center;justify-content:center;}
.character-base{width:50px;height:50px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23f59e0b"/></svg>');background-size:contain;background-repeat:no-repeat;}
.character-weapon,.character-armor{position:absolute;background-size:contain;background-repeat:no-repeat;}
.character-weapon{width:30px;height:30px;top:25px;left:45px;}
.character-armor{width:40px;height:40px;top:20px;left:30px;}
.header-text h1{color:var(--accent);font-size:1.5rem;margin-bottom:5px;}
.header-text div{color:var(--text-muted);}
.gold-display{display:flex;align-items:center;gap:8px;font-weight:bold;color:var(--gold);}
.tabs{display:flex;margin-bottom:20px;background:var(--panel-bg);border-radius:12px;overflow:hidden;}
.tab-btn{flex:1;padding:12px;background:transparent;border:none;color:var(--text-muted);cursor:pointer;font-weight:bold;transition:0.3s;}
.tab-btn:hover{background:rgba(59,130,246,0.1);color:var(--text);}
.tab-btn.active{background:var(--accent);color:#fff;}
.tab-content{display:none;}
.tab-content.active{display:block;}
.character-creation{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px;}
.creation-panel{background:var(--panel-bg);padding:20px;border-radius:12px;}
.creation-panel h2{margin-bottom:20px;color:var(--accent);}
.nickname-input input{width:100%;padding:10px;border-radius:8px;background:rgba(30,41,59,0.7);border:2px solid #334155;color:var(--text);}
.class-grid,.gender-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:20px;}
.class-option,.gender-option{background:rgba(30,41,59,0.7);padding:15px;border:2px solid #334155;border-radius:8px;text-align:center;cursor:pointer;transition:0.3s;}
.class-option.selected,.gender-option.selected{border-color:var(--accent);background:rgba(59,130,246,0.2);}
.character-preview{margin-top:20px;padding-top:20px;border-top:1px solid #334155;}
.character-preview h3{color:var(--accent);margin-bottom:15px;}
#character-avatar{font-size:3rem;}
.character-sheet{display:grid;grid-template-columns:300px 1fr;gap:20px;}
.stats-panel{background:var(--panel-bg);padding:20px;border-radius:12px;}
.character-header{display:flex;align-items:center;gap:15px;margin-bottom:20px;border-bottom:1px solid #334155;padding-bottom:15px;}
#stats-avatar{font-size:3rem;position:relative;}
.equipment-slots{position:absolute;font-size:0.8rem;background:rgba(0,0,0,0.7);border-radius:4px;padding:2px 5px;}
.resource-bar{margin-bottom:15px;}
.bar-label{display:flex;justify-content:space-between;margin-bottom:5px;}
.bar{height:20px;background:#334155;border-radius:10px;overflow:hidden;}
.bar-fill{height:100%;border-radius:10px;transition:width 0.3s;}
.health .bar-fill{background:var(--health);}
.mana .bar-fill{background:var(--mana);}
.xp .bar-fill{background:var(--xp);}
.attributes{margin-top:20px;}
.attribute{display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #334155;}
.upgrade-btn{background:var(--accent);color:#fff;border:none;border-radius:4px;padding:4px 8px;cursor:pointer;font-size:0.8rem;transition:0.2s;}
.upgrade-btn:hover{background:var(--accent-dark);}
.upgrade-btn:disabled{background:var(--locked);cursor:not-allowed;}
.combat-stats{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:20px;}
.stat-item{background:rgba(30,41,59,0.7);padding:12px;border-radius:8px;text-align:center;}
.stat-value{color:var(--accent);font-weight:bold;}
.inventory-panel{background:var(--panel-bg);padding:20px;border-radius:12px;margin-top:20px;}
.inventory-header{display:flex;justify-content:space-between;align-items:center;}
.inventory-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin-top:15px;}
.item-slot{background:rgba(30,41,59,0.7);height:70px;border-radius:8px;display:flex;align-items:center;justify-content:center;border:2px solid #334155;position:relative;cursor:pointer;transition:0.3s;}
.item-slot.empty::before{content:"+";font-size:1.5rem;color:var(--text-muted);}
.item-slot.equipped{border-color:var(--accent);box-shadow:0 0 10px rgba(59,130,246,0.5);}
.item-context-menu{position:absolute;background:var(--panel-bg);border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.4);z-index:100;padding:10px;display:none;flex-direction:column;gap:5px;}
.item-context-btn{padding:8px 12px;background:var(--accent);color:#fff;border:none;border-radius:4px;cursor:pointer;text-align:left;}
.item-context-btn.sell{background:var(--success);}
.item-context-btn.dismantle{background:var(--danger);}
.skills-container{background:var(--panel-bg);padding:20px;border-radius:12px;}
.skills-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:15px;}
.skill-card{background:rgba(30,41,59,0.7);padding:15px;border-radius:8px;text-align:center;transition:0.3s;cursor:pointer;position:relative;}
.skill-card:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,0.3);}
.skill-level{position:absolute;top:10px;right:10px;background:var(--accent);color:#fff;border-radius:50%;width:25px;height:25px;display:flex;align-items:center;justify-content:center;font-size:0.8rem;font-weight:bold;}
.skill-upgrade{margin-top:10px;background:var(--accent);color:#fff;border:none;border-radius:4px;padding:5px 10px;cursor:pointer;font-size:0.8rem;}
.skill-upgrade:disabled{background:var(--locked);cursor:not-allowed;}
.tavern-panel{background:var(--panel-bg);padding:20px;border-radius:12px;}
.tavern-tabs{display:flex;margin-bottom:20px;background:rgba(30,41,59,0.7);border-radius:8px;overflow:hidden;}
.tavern-tab{flex:1;padding:12px;background:transparent;border:none;color:var(--text-muted);cursor:pointer;transition:0.3s;}
.tavern-tab.active{background:var(--accent);color:#fff;}
.tavern-content{display:none;}
.tavern-content.active{display:block;}
.start-button{display:block;width:100%;padding:15px;background:var(--accent);color:#fff;border:none;border-radius:8px;font-size:1.2rem;font-weight:bold;cursor:pointer;margin-top:20px;}
.start-button:hover{background:var(--accent-dark);}
.level-up-notification{position:fixed;top:20px;right:20px;background:var(--accent);color:#fff;padding:15px 20px;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,0.3);z-index:1000;display:flex;align-items:center;gap:10px;transform:translateX(100%);transition:transform 0.5s;}
.level-up-notification.show{transform:translateX(0);}
@media(max-width:900px){.character-creation{grid-template-columns:1fr;}.character-sheet{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="container">
<header>
<div class="character-info">
<div class="character-visual">
<div class="character-base" id="character-base"></div>
<div class="character-weapon" id="character-weapon"></div>
<div class="character-armor" id="character-armor"></div>
</div>
<div class="header-text">
<h1 id="header-name">–í–æ–∏–Ω</h1>
<div id="header-level">–£—Ä–æ–≤–µ–Ω—å 1</div>
</div>
</div>
<div class="gold-display"><span>ü™ô</span><span id="gold-amount">50</span></div>
</header>

<div class="tabs">
<button class="tab-btn active" data-tab="creation">–°–æ–∑–¥–∞–Ω–∏–µ</button>
<button class="tab-btn" data-tab="stats">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
<button class="tab-btn" data-tab="skills">–£–º–µ–Ω–∏—è</button>
<button class="tab-btn" data-tab="tavern">–¢–∞–≤–µ—Ä–Ω–∞</button>
<button class="tab-btn" data-tab="location">–õ–æ–∫–∞—Ü–∏–∏</button>
</div>

<div class="tab-content active" id="creation">
<!-- –ü–∞–Ω–µ–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
<div class="character-creation">
<div class="creation-panel">
<h2>–í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞</h2>
<div class="nickname-input">
<label for="nickname">–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:</label>
<input type="text" id="nickname" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
</div>
<div class="class-grid">
<div class="class-option selected" data-class="warrior">
<div class="class-icon">‚öîÔ∏è</div>
<div class="class-name">–í–æ–∏–Ω</div>
<div class="class-desc">–°–∏–ª—å–Ω—ã–π –±–æ–µ—Ü –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è</div>
</div>
<div class="class-option" data-class="mage">
<div class="class-icon">üßô</div>
<div class="class-name">–ú–∞–≥</div>
<div class="class-desc">–ú–æ—â–Ω—ã–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è</div>
</div>
<div class="class-option" data-class="archer">
<div class="class-icon">üèπ</div>
<div class="class-name">–õ—É—á–Ω–∏–∫</div>
<div class="class-desc">–¢–æ—á–Ω—ã–µ –≤—ã—Å—Ç—Ä–µ–ª—ã –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏</div>
</div>
<div class="class-option" data-class="rogue">
<div class="class-icon">üó°Ô∏è</div>
<div class="class-name">–†–∞–∑–±–æ–π–Ω–∏–∫</div>
<div class="class-desc">–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å –∏ –∞—Ç–∞–∫–∏ –∏–∑ —Ç–µ–Ω–∏</div>
</div>
</div>
</div>

<div class="creation-panel">
<h2>–í—ã–±–æ—Ä –ø–æ–ª–∞</h2>
<div class="gender-grid">
<div class="gender-option selected" data-gender="male">
<div class="class-icon">üë®</div>
<div class="class-name">–ú—É–∂—Å–∫–æ–π</div>
</div>
<div class="gender-option" data-gender="female">
<div class="class-icon">üë©</div>
<div class="class-name">–ñ–µ–Ω—Å–∫–∏–π</div>
</div>
</div>

<div class="character-preview">
<h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
<div class="preview-content">
<div id="character-avatar">‚öîÔ∏è</div>
<div id="character-info">
<div id="character-name">–í–æ–∏–Ω</div>
<div id="character-level">–£—Ä–æ–≤–µ–Ω—å 1</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="tab-content" id="stats">
<!-- –ü–∞–Ω–µ–ª—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ -->
<div class="character-sheet">
<div class="stats-panel">
<h2>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
<div class="character-header">
<div id="stats-avatar">‚öîÔ∏è<div class="equipment-slots" id="weapon-slot"></div><div class="equipment-slots" id="armor-slot"></div></div>
<div><div id="stats-name">–í–æ–∏–Ω</div><div id="stats-class">–£—Ä–æ–≤–µ–Ω—å 1</div></div>
</div>
<div class="resource-bar health">
<div class="bar-label"><span>–ó–¥–æ—Ä–æ–≤—å–µ</span><span id="health-value">100/100</span></div>
<div class="bar"><div class="bar-fill" id="health-bar" style="width:100%"></div></div>
</div>
<div class="resource-bar mana">
<div class="bar-label"><span>–ú–∞–Ω–∞</span><span id="mana-value">50/50</span></div>
<div class="bar"><div class="bar-fill" id="mana-bar" style="width:100%"></div></div>
</div>
<div class="resource-bar xp">
<div class="bar-label"><span>–û–ø—ã—Ç</span><span id="xp-value">0/100</span></div>
<div class="bar"><div class="bar-fill" id="xp-bar" style="width:0%"></div></div>
</div>
<div class="attributes">
<div class="attribute">–°–∏–ª–∞ <span id="strength-value">10</span><button class="upgrade-btn" id="upgrade-strength">+</button></div>
<div class="attribute">–õ–æ–≤–∫–æ—Å—Ç—å <span id="agility-value">10</span><button class="upgrade-btn" id="upgrade-agility">+</button></div>
<div class="attribute">–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å <span id="vitality-value">10</span><button class="upgrade-btn" id="upgrade-vitality">+</button></div>
<div class="attribute">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç <span id="intellect-value">10</span><button class="upgrade-btn" id="upgrade-intellect">+</button></div>
</div>
<div class="combat-stats">
<div class="stat-item">–ê—Ç–∞–∫–∞ <div class="stat-value" id="attack-value">15</div></div>
<div class="stat-item">–ó–∞—â–∏—Ç–∞ <div class="stat-value" id="defense-value">10</div></div>
<div class="stat-item">–°–∫–æ—Ä–æ—Å—Ç—å <div class="stat-value" id="speed-value">8</div></div>
<div class="stat-item">–ö—Ä–∏—Ç <div class="stat-value" id="crit-value">5%</div></div>
</div>
</div>
<div class="inventory-panel">
<div class="inventory-header"><h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2><button class="start-button" id="send-to-bot">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É</button></div>
<div class="inventory-grid" id="inventory-grid">
<!-- –°–ª–æ—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
</div>
</div>
</div>
</div>

<div class="tab-content" id="skills">
<div class="skills-container">
<h2>–£–º–µ–Ω–∏—è</h2>
<div class="skills-grid" id="skills-grid">
<!-- –°–∫–∏–ª—ã -->
</div>
</div>
</div>

<div class="tab-content" id="tavern">
<div class="tavern-panel">
<h2>–¢–∞–≤–µ—Ä–Ω–∞</h2>
<div class="tavern-tabs">
<button class="tavern-tab active" data-tab="quests">–ö–≤–µ—Å—Ç—ã</button>
<button class="tavern-tab" data-tab="shop">–ú–∞–≥–∞–∑–∏–Ω</button>
<button class="tavern-tab" data-tab="npc">NPC</button>
</div>
<div class="tavern-content active" id="quests">–°–ø–∏—Å–æ–∫ –∫–≤–µ—Å—Ç–æ–≤...</div>
<div class="tavern-content" id="shop">–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–µ–¥–º–µ—Ç–æ–≤...</div>
<div class="tavern-content" id="npc">–î–∏–∞–ª–æ–≥–∏ —Å NPC...</div>
</div>
</div>

<div class="tab-content" id="location">
<div class="tavern-panel">
<h2>–õ–æ–∫–∞—Ü–∏–∏</h2>
<div class="tavern-content active" id="locations">–í—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –ø–æ—Ö–æ–¥–∞...</div>
</div>
</div>
</div>

<div class="level-up-notification" id="level-up">üéâ –í—ã –ø–æ–≤—ã—Å–∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å!</div>

<script>
// Tabs
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(tc=>tc.classList.remove('active'));
        document.getElementById(btn.dataset.tab).classList.add('active');
    });
});

// Tavern tabs
document.querySelectorAll('.tavern-tab').forEach(btn=>{
    btn.addEventListener('click',()=>{
        document.querySelectorAll('.tavern-tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tavern-content').forEach(tc=>tc.classList.remove('active'));
        document.getElementById(btn.dataset.tab).classList.add('active');
    });
});

// Character creation
let character = {
    name:"–í–æ–∏–Ω",
    class:"warrior",
    gender:"male",
    level:1,
    health:100,
    mana:50,
    xp:0,
    strength:10,
    agility:10,
    vitality:10,
    intellect:10,
    gold:50,
    inventory:[]
};

function updatePreview(){
    document.getElementById('character-avatar').textContent = character.class=="warrior"?"‚öîÔ∏è":character.class=="mage"?"üßô":character.class=="archer"?"üèπ":"üó°Ô∏è";
    document.getElementById('character-name').textContent = character.name;
    document.getElementById('character-level').textContent = "–£—Ä–æ–≤–µ–Ω—å "+character.level;
    document.getElementById('header-name').textContent = character.name;
    document.getElementById('header-level').textContent = "–£—Ä–æ–≤–µ–Ω—å "+character.level;
    document.getElementById('gold-amount').textContent = character.gold;
}
updatePreview();

document.getElementById('nickname').addEventListener('input',(e)=>{
    character.name = e.target.value || "–í–æ–∏–Ω";
    updatePreview();
});

document.querySelectorAll('.class-option').forEach(btn=>{
    btn.addEventListener('click',()=>{
        document.querySelectorAll('.class-option').forEach(b=>b.classList.remove('selected'));
        btn.classList.add('selected');
        character.class = btn.dataset.class;
        updatePreview();
    });
});

document.querySelectorAll('.gender-option').forEach(btn=>{
    btn.addEventListener('click',()=>{
        document.querySelectorAll('.gender-option').forEach(b=>b.classList.remove('selected'));
        btn.classList.add('selected');
        character.gender = btn.dataset.gender;
        updatePreview();
    });
});

// Upgrade stats
['strength','agility','vitality','intellect'].forEach(stat=>{
    document.getElementById(`upgrade-${stat}`).addEventListener('click',()=>{
        character[stat]++;
        document.getElementById(`${stat}-value`).textContent = character[stat];
    });
});

// Send to Telegram bot
document.getElementById('send-to-bot').addEventListener('click',()=>{
    if(window.Telegram.WebApp){
        window.Telegram.WebApp.sendData(JSON.stringify(character));
        alert("–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –±–æ—Ç—É!");
    }else{
        alert("–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Telegram Web App.");
    }
});
</script>
</body>
</html>
